{"ast":null,"code":"import { onMounted } from 'vue';\nimport { usePostStore } from '@/stores/post';\nimport { useTopicStore } from '@/stores/topic';\nexport default {\n  __name: 'HomeView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const topicStore = useTopicStore();\n    const fetchTopicsPosts = async () => {\n      await topicStore.fetchTopics();\n    };\n    console.log(topicStore.state);\n    const postStore = usePostStore();\n    const fetchPosts = async () => {\n      await postStore.fetchPosts();\n    };\n    onMounted(async () => {\n      await fetchTopicsPosts();\n      await fetchPosts();\n    });\n\n    /*\r\n    const couleursCategorie=ref([\"blue-grey-lighten-4\",\"red-lighten-4\",\"pink-lighten-4\",\"purple-lighten-4\",\"indigo-lighten-4\",\"blue-lighten-4\",\"cyan-lighten-4\",\"teal-lighten-4\",\"green-lighten-4\",\"light-green-lighten-4\",\"lime-lighten-4\",\"yellow-lighten-4\",\"orange-lighten-4\",\"brown-lighten-4\"]);\r\n    let arrayPosts = ref([]);\r\n    let arrayAllPosts =ref([]);\r\n    // on importe la liste des posts\r\n    \n      const arrayCategories = ref([]);    \r\n      arrayAllPosts.value = await posts();\r\n      const addTopicField=()=>{\r\n        console.log('je passe dans addTopicField');\r\n        const keys=Object.keys(arrayAllPosts.value)\r\n        keys.forEach((topic)=>{\r\n            const tabTopicEnCours=arrayAllPosts.value[topic];\r\n            tabTopicEnCours.forEach((article)=>{\r\n                const found=arrayCategories.value.indexOf(topic)\r\n                article.Topic = found!=-1 ? found+1 : 0;\r\n                article.TopicText = topic;    \r\n                arrayPosts.value.push(article);\r\n            })\r\n           \r\n        })\r\n        \r\n        arrayPosts.value=shuffleArray(arrayPosts.value);\r\n        \r\n    }\r\n      function shuffleArray(array) {\r\n        console.log(\"-------------- je suis la\");\r\n    for (var i = array.length - 1; i > 0; i--) {\r\n        var j = Math.floor(Math.random() * (i + 1));\r\n       \r\n        var temp = array[i];\r\n        array[i] = array[j];\r\n        array[j] = temp;\r\n       \r\n    }\r\n    return(array);\r\n    }\r\n    \r\n    \n      \r\n        onMounted(async ()=>{\r\n        console.log(\"-------------- je passe dans onMounted \");\r\n        arrayCategories.value = await categories();\r\n        addTopicField();\r\n       \r\n    })\r\n    */\n\n    const __returned__ = {\n      topicStore,\n      fetchTopicsPosts,\n      postStore,\n      fetchPosts,\n      onMounted,\n      get usePostStore() {\n        return usePostStore;\n      },\n      get useTopicStore() {\n        return useTopicStore;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","usePostStore","useTopicStore","topicStore","fetchTopicsPosts","fetchTopics","console","log","state","postStore","fetchPosts"],"sources":["C:/Users/jfrey/Dropbox/cours/_webdev/code/semaine 4/lundi/website-practice/src/views/HomeView.vue"],"sourcesContent":["<template>\r\n    <div class=\"home\">\r\n        <h1 class=\"ma-2\">Home</h1>\r\n        <v-row class=\"-flex justify-center\">\r\n            \r\n            <v-card v-for=\"(post,index) in postStore.formattedPosts\" :key=\"index\" \r\n            \r\n                class=\"w-33 pa-4 ma-2 \"\r\n               \r\n                >\r\n                <v-img\r\n                max-height=\"200px\"\r\n                width=\"300px\"\r\n                :src=\"post.image\"\r\n               \r\n                cover\r\n                ></v-img>\r\n               \r\n                <v-card-title>{{ post.title }}</v-card-title>\r\n                \r\n                <v-card-text>{{ post.body }}</v-card-text>\r\n                <v-card-actions>\r\n                    <v-btn\r\n                        color=\"orange-darken-4\"\r\n                        text = \"Lire l'article\"\r\n                        :to=\"{ name: 'post',params: { id: index } }\"\r\n                    ></v-btn> \r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-row>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n\r\n    import { onMounted } from 'vue';\r\n    import { usePostStore } from '@/stores/post';    \r\n    import { useTopicStore } from '@/stores/topic';    \r\n    \r\n      \r\n    const topicStore = useTopicStore();\r\n\r\n    const fetchTopicsPosts = async () =>{\r\n        await topicStore.fetchTopics();\r\n    } \r\n    console.log(topicStore.state);\r\n    \r\n    const postStore = usePostStore();\r\n\r\n\r\n    const fetchPosts = async () =>{\r\n        await postStore.fetchPosts();\r\n    } \r\n\r\n    onMounted( async() => {\r\n      \r\n        await fetchTopicsPosts();\r\n        await fetchPosts();\r\n    });\r\n\r\n\r\n    /*\r\n    const couleursCategorie=ref([\"blue-grey-lighten-4\",\"red-lighten-4\",\"pink-lighten-4\",\"purple-lighten-4\",\"indigo-lighten-4\",\"blue-lighten-4\",\"cyan-lighten-4\",\"teal-lighten-4\",\"green-lighten-4\",\"light-green-lighten-4\",\"lime-lighten-4\",\"yellow-lighten-4\",\"orange-lighten-4\",\"brown-lighten-4\"]);\r\n    let arrayPosts = ref([]);\r\n    let arrayAllPosts =ref([]);\r\n    // on importe la liste des posts\r\n   \r\n\r\n    const arrayCategories = ref([]);    \r\n\r\n    arrayAllPosts.value = await posts();\r\n\r\n    const addTopicField=()=>{\r\n        console.log('je passe dans addTopicField');\r\n        const keys=Object.keys(arrayAllPosts.value)\r\n        keys.forEach((topic)=>{\r\n            const tabTopicEnCours=arrayAllPosts.value[topic];\r\n            tabTopicEnCours.forEach((article)=>{\r\n                const found=arrayCategories.value.indexOf(topic)\r\n                article.Topic = found!=-1 ? found+1 : 0;\r\n                article.TopicText = topic;    \r\n                arrayPosts.value.push(article);\r\n            })\r\n           \r\n        })\r\n        \r\n        arrayPosts.value=shuffleArray(arrayPosts.value);\r\n        \r\n    }\r\n\r\n    function shuffleArray(array) {\r\n        console.log(\"-------------- je suis la\");\r\n    for (var i = array.length - 1; i > 0; i--) {\r\n        var j = Math.floor(Math.random() * (i + 1));\r\n       \r\n        var temp = array[i];\r\n        array[i] = array[j];\r\n        array[j] = temp;\r\n       \r\n    }\r\n    return(array);\r\n    }\r\n    \r\n   \r\n  \r\n  \r\n\r\n\r\n    onMounted(async ()=>{\r\n        console.log(\"-------------- je passe dans onMounted \");\r\n        arrayCategories.value = await categories();\r\n        addTopicField();\r\n       \r\n    })\r\n*/\r\n</script>"],"mappings":"AAmCI,SAASA,SAAS,QAAQ,KAAK;AAC/B,SAASC,YAAY,QAAQ,eAAe;AAC5C,SAASC,aAAa,QAAQ,gBAAgB;;;;;;;IAG9C,MAAMC,UAAU,GAAGD,aAAa,CAAC,CAAC;IAElC,MAAME,gBAAgB,GAAG,MAAAA,CAAA,KAAW;MAChC,MAAMD,UAAU,CAACE,WAAW,CAAC,CAAC;IAClC,CAAC;IACDC,OAAO,CAACC,GAAG,CAACJ,UAAU,CAACK,KAAK,CAAC;IAE7B,MAAMC,SAAS,GAAGR,YAAY,CAAC,CAAC;IAGhC,MAAMS,UAAU,GAAG,MAAAA,CAAA,KAAW;MAC1B,MAAMD,SAAS,CAACC,UAAU,CAAC,CAAC;IAChC,CAAC;IAEDV,SAAS,CAAE,YAAW;MAElB,MAAMI,gBAAgB,CAAC,CAAC;MACxB,MAAMM,UAAU,CAAC,CAAC;IACtB,CAAC,CAAC;;IAGF;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}