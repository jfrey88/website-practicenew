{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { withAsyncContext as _withAsyncContext } from 'vue';\nimport { onMounted, ref } from 'vue';\nimport { posts } from '../models/posts.js';\nimport { categories } from '../models/categories.js';\nexport default {\n  __name: 'HomeView',\n  async setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    let __temp, __restore;\n    const couleursCategorie = ref([\"blue-grey-lighten-4\", \"red-lighten-4\", \"pink-lighten-4\", \"purple-lighten-4\", \"indigo-lighten-4\", \"blue-lighten-4\", \"cyan-lighten-4\", \"teal-lighten-4\", \"green-lighten-4\", \"light-green-lighten-4\", \"lime-lighten-4\", \"yellow-lighten-4\", \"orange-lighten-4\", \"brown-lighten-4\"]);\n    let arrayPosts = ref([]);\n    let arrayAllPosts = ref([]);\n    // on importe la liste des posts\n\n    const arrayCategories = ref([]);\n    arrayAllPosts.value = ([__temp, __restore] = _withAsyncContext(() => posts()), __temp = await __temp, __restore(), __temp);\n    const addTopicField = () => {\n      console.log('je passe dans addTopicField');\n      const keys = Object.keys(arrayAllPosts.value);\n      keys.forEach(topic => {\n        const tabTopicEnCours = arrayAllPosts.value[topic];\n        tabTopicEnCours.forEach(article => {\n          const found = arrayCategories.value.indexOf(topic);\n          article.Topic = found != -1 ? found + 1 : 0;\n          article.TopicText = topic;\n          arrayPosts.value.push(article);\n        });\n      });\n      arrayPosts.value = shuffleArray(arrayPosts.value);\n    };\n    function shuffleArray(array) {\n      console.log(\"-------------- je suis la\");\n      for (var i = array.length - 1; i > 0; i--) {\n        var j = Math.floor(Math.random() * (i + 1));\n        var temp = array[i];\n        array[i] = array[j];\n        array[j] = temp;\n      }\n      return array;\n    }\n    onMounted(async () => {\n      console.log(\"-------------- je passe dans onMounted \");\n      arrayCategories.value = await categories();\n      addTopicField();\n    });\n    const __returned__ = {\n      couleursCategorie,\n      get arrayPosts() {\n        return arrayPosts;\n      },\n      set arrayPosts(v) {\n        arrayPosts = v;\n      },\n      get arrayAllPosts() {\n        return arrayAllPosts;\n      },\n      set arrayAllPosts(v) {\n        arrayAllPosts = v;\n      },\n      arrayCategories,\n      addTopicField,\n      shuffleArray,\n      onMounted,\n      ref,\n      get posts() {\n        return posts;\n      },\n      get categories() {\n        return categories;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["onMounted","ref","posts","categories","couleursCategorie","arrayPosts","arrayAllPosts","arrayCategories","value","__temp","__restore","_withAsyncContext","addTopicField","console","log","keys","Object","forEach","topic","tabTopicEnCours","article","found","indexOf","Topic","TopicText","push","shuffleArray","array","i","length","j","Math","floor","random","temp"],"sources":["C:/Users/jfrey/Dropbox/cours/_webdev/code/semaine 4/lundi/website-practice/src/views/HomeView.vue"],"sourcesContent":["<template>\r\n    <div class=\"home\">\r\n        <h1 class=\"ma-2\">Home</h1>\r\n        <v-row class=\"-flex justify-center\">\r\n            <v-card v-for=\"(post,index) in arrayPosts\" :key=\"index\" \r\n                class=\"w-33 pa-4 ma-2 \"\r\n                :color=\"couleursCategorie[post.Topic]\"\r\n                >\r\n                <v-img\r\n                max-height=\"200px\"\r\n                width=\"300px\"\r\n                :src=\"`${post.Image}`\"\r\n               \r\n                cover\r\n                ></v-img>\r\n                \r\n                <v-card-title>{{ post.Titre }}</v-card-title>\r\n                <v-card-title>{{ post.TopicText }}</v-card-title>\r\n                <v-card-text>{{ post.Description }}</v-card-text>\r\n                <v-card-actions>\r\n                    <v-btn\r\n                        color=\"orange-darken-4\"\r\n                        text = \"Lire l'article\"\r\n                        :to=\"{ name: 'post',params: { id: index } }\"\r\n                    ></v-btn> \r\n                </v-card-actions>\r\n            </v-card>\r\n        </v-row>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n\r\n    import { onMounted, ref } from 'vue';\r\n    import {posts } from '../models/posts.js';\r\n    import {categories } from '../models/categories.js';\r\n    \r\n    const couleursCategorie=ref([\"blue-grey-lighten-4\",\"red-lighten-4\",\"pink-lighten-4\",\"purple-lighten-4\",\"indigo-lighten-4\",\"blue-lighten-4\",\"cyan-lighten-4\",\"teal-lighten-4\",\"green-lighten-4\",\"light-green-lighten-4\",\"lime-lighten-4\",\"yellow-lighten-4\",\"orange-lighten-4\",\"brown-lighten-4\"]);\r\n    let arrayPosts = ref([]);\r\n    let arrayAllPosts =ref([]);\r\n    // on importe la liste des posts\r\n   \r\n\r\n    const arrayCategories = ref([]);    \r\n\r\n    arrayAllPosts.value = await posts();\r\n\r\n    const addTopicField=()=>{\r\n        console.log('je passe dans addTopicField');\r\n        const keys=Object.keys(arrayAllPosts.value)\r\n        keys.forEach((topic)=>{\r\n            const tabTopicEnCours=arrayAllPosts.value[topic];\r\n            tabTopicEnCours.forEach((article)=>{\r\n                const found=arrayCategories.value.indexOf(topic)\r\n                article.Topic = found!=-1 ? found+1 : 0;\r\n                article.TopicText = topic;    \r\n                arrayPosts.value.push(article);\r\n            })\r\n           \r\n        })\r\n        \r\n        arrayPosts.value=shuffleArray(arrayPosts.value);\r\n        \r\n    }\r\n\r\n    function shuffleArray(array) {\r\n        console.log(\"-------------- je suis la\");\r\n    for (var i = array.length - 1; i > 0; i--) {\r\n        var j = Math.floor(Math.random() * (i + 1));\r\n       \r\n        var temp = array[i];\r\n        array[i] = array[j];\r\n        array[j] = temp;\r\n       \r\n    }\r\n    return(array);\r\n    }\r\n    \r\n   \r\n  \r\n  \r\n\r\n\r\n    onMounted(async ()=>{\r\n        console.log(\"-------------- je passe dans onMounted \");\r\n        arrayCategories.value = await categories();\r\n        addTopicField();\r\n       \r\n    })\r\n\r\n</script>"],"mappings":";;AAiCI,SAASA,SAAS,EAAEC,GAAG,QAAQ,KAAK;AACpC,SAAQC,KAAK,QAAQ,oBAAoB;AACzC,SAAQC,UAAU,QAAQ,yBAAyB;;;;;;;;IAEnD,MAAMC,iBAAiB,GAACH,GAAG,CAAC,CAAC,qBAAqB,EAAC,eAAe,EAAC,gBAAgB,EAAC,kBAAkB,EAAC,kBAAkB,EAAC,gBAAgB,EAAC,gBAAgB,EAAC,gBAAgB,EAAC,iBAAiB,EAAC,uBAAuB,EAAC,gBAAgB,EAAC,kBAAkB,EAAC,kBAAkB,EAAC,iBAAiB,CAAC,CAAC;IACjS,IAAII,UAAU,GAAGJ,GAAG,CAAC,EAAE,CAAC;IACxB,IAAIK,aAAa,GAAEL,GAAG,CAAC,EAAE,CAAC;IAC1B;;IAGA,MAAMM,eAAe,GAAGN,GAAG,CAAC,EAAE,CAAC;IAE/BK,aAAa,CAACE,KAAK,IAAG,CAAAC,MAAA,EAAAC,SAAA,IAAAC,iBAAA,OAAMT,KAAK,CAAC,I,2CAAC;IAEnC,MAAMU,aAAa,GAACA,CAAA,KAAI;MACpBC,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;MAC1C,MAAMC,IAAI,GAACC,MAAM,CAACD,IAAI,CAACT,aAAa,CAACE,KAAK,CAAC;MAC3CO,IAAI,CAACE,OAAO,CAAEC,KAAK,IAAG;QAClB,MAAMC,eAAe,GAACb,aAAa,CAACE,KAAK,CAACU,KAAK,CAAC;QAChDC,eAAe,CAACF,OAAO,CAAEG,OAAO,IAAG;UAC/B,MAAMC,KAAK,GAACd,eAAe,CAACC,KAAK,CAACc,OAAO,CAACJ,KAAK,CAAC;UAChDE,OAAO,CAACG,KAAK,GAAGF,KAAK,IAAE,CAAC,CAAC,GAAGA,KAAK,GAAC,CAAC,GAAG,CAAC;UACvCD,OAAO,CAACI,SAAS,GAAGN,KAAK;UACzBb,UAAU,CAACG,KAAK,CAACiB,IAAI,CAACL,OAAO,CAAC;QAClC,CAAC,CAAC;MAEN,CAAC,CAAC;MAEFf,UAAU,CAACG,KAAK,GAACkB,YAAY,CAACrB,UAAU,CAACG,KAAK,CAAC;IAEnD,CAAC;IAED,SAASkB,YAAYA,CAACC,KAAK,EAAE;MACzBd,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;MAC5C,KAAK,IAAIc,CAAC,GAAGD,KAAK,CAACE,MAAM,GAAG,CAAC,EAAED,CAAC,GAAG,CAAC,EAAEA,CAAC,EAAE,EAAE;QACvC,IAAIE,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,IAAIL,CAAC,GAAG,CAAC,CAAC,CAAC;QAE3C,IAAIM,IAAI,GAAGP,KAAK,CAACC,CAAC,CAAC;QACnBD,KAAK,CAACC,CAAC,CAAC,GAAGD,KAAK,CAACG,CAAC,CAAC;QACnBH,KAAK,CAACG,CAAC,CAAC,GAAGI,IAAI;MAEnB;MACA,OAAOP,KAAK;IACZ;IAOA3B,SAAS,CAAC,YAAU;MAChBa,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAC;MACtDP,eAAe,CAACC,KAAK,GAAG,MAAML,UAAU,CAAC,CAAC;MAC1CS,aAAa,CAAC,CAAC;IAEnB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}