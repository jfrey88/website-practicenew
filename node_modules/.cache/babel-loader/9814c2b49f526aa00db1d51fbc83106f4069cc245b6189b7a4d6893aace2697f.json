{"ast":null,"code":"import { withAsyncContext as _withAsyncContext } from 'vue';\nimport AppFormComment from '@/components/forms/AppFormComment.vue';\nimport { onMounted, ref } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { usePostStore } from '@/stores/post';\nimport { useCommentStore } from '@/stores/comment';\nimport { comments } from '../models/comments.js';\nexport default {\n  __name: 'PostView',\n  async setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    let __temp, __restore;\n    const route = useRoute();\n    const id = route.params.id;\n    const postStore = usePostStore();\n    const commentStore = useCommentStore();\n    let tabCommentofThisPost = ref([]);\n    tabCommentofThisPost = commentStore.getCommentsForPost(id);\n    console.log(\"PostView.vue--------------- tabCommentofThisPost -----------------------\");\n    console.log(tabCommentofThisPost);\n    const fetchOnePost = async () => {\n      await postStore.fetchOnePost(id);\n    };\n    onMounted(async () => {\n      await fetchOnePost(id);\n      commentStore.getCommentsForPost(id);\n    });\n\n    //const data = await response.json();  \n\n    const arrayComments = ref([]);\n    arrayComments.value = ([__temp, __restore] = _withAsyncContext(() => comments(id)), __temp = await __temp, __restore(), __temp);\n    const __returned__ = {\n      route,\n      id,\n      postStore,\n      commentStore,\n      get tabCommentofThisPost() {\n        return tabCommentofThisPost;\n      },\n      set tabCommentofThisPost(v) {\n        tabCommentofThisPost = v;\n      },\n      fetchOnePost,\n      arrayComments,\n      AppFormComment,\n      onMounted,\n      ref,\n      get useRoute() {\n        return useRoute;\n      },\n      get usePostStore() {\n        return usePostStore;\n      },\n      get useCommentStore() {\n        return useCommentStore;\n      },\n      get comments() {\n        return comments;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["AppFormComment","onMounted","ref","useRoute","usePostStore","useCommentStore","comments","route","id","params","postStore","commentStore","tabCommentofThisPost","getCommentsForPost","console","log","fetchOnePost","arrayComments","value","__temp","__restore","_withAsyncContext"],"sources":["C:/Users/jfrey/Dropbox/cours/_webdev/code/semaine 4/lundi/website-practice/src/views/PostView.vue"],"sourcesContent":["<template>\r\n    <div class=\"home\">\r\n        <v-card class=\"w-250 pa-4\">\r\n            <v-img\r\n                max-height=\"100px\"\r\n                max-width=\"150px\"\r\n                :src=\"`${postStore.formattedPost.image}`\"\r\n               \r\n                cover\r\n                ></v-img>\r\n            <v-card-title>{{ postStore.formattedPost.title }}</v-card-title>\r\n            <v-card-text>{{ postStore.formattedPost.body }}</v-card-text>\r\n            \r\n        </v-card>\r\n        \r\n                <h2 class=\"pa-4\">LAISSEZ UN COMMENTAIRE</h2>\r\n                <AppFormComment />\r\n         \r\n        \r\n       \r\n        <h2 class=\"pa-4\">COMMENTAIRES</h2>\r\n        <v-row>\r\n            <v-card v-for=\"post in arrayComments\" :key=\"post.id\" class=\"w-100 pa-4\">\r\n               \r\n                <v-card-title>{{ post.name+\" \"+post.email }}</v-card-title>\r\n                <v-card-text>{{ post.body }}</v-card-text>\r\n                \r\n            </v-card>\r\n        </v-row>\r\n    </div>\r\n</template>\r\n<script setup>\r\n  import AppFormComment from '@/components/forms/AppFormComment.vue';\r\n  import { onMounted ,ref } from 'vue';\r\n \r\n  import {useRoute } from 'vue-router';\r\n  import { usePostStore } from '@/stores/post';    \r\n  import { useCommentStore } from '@/stores/comment';    \r\n  \r\n  const route = useRoute();\r\n  const id=route.params.id;\r\n\r\n\r\n\r\n  const postStore = usePostStore();\r\n  const commentStore = useCommentStore();\r\n\r\n  let tabCommentofThisPost = ref([]);\r\n  tabCommentofThisPost=commentStore.getCommentsForPost(id);\r\n  console.log(\"PostView.vue--------------- tabCommentofThisPost -----------------------\");\r\n  console.log(tabCommentofThisPost);\r\n\r\n   const fetchOnePost = async () =>{\r\n     await postStore.fetchOnePost(id);\r\n     \r\n   \r\n   } \r\n\r\n  onMounted( async() => {\r\n    \r\n    await fetchOnePost(id);\r\n    commentStore.getCommentsForPost(id);\r\n    \r\n  });\r\n\r\n  \r\n\r\n\r\n\r\n\r\n  //const data = await response.json();  \r\n\r\n  const arrayComments = ref([]);\r\n\r\n  import {comments } from '../models/comments.js';\r\n  arrayComments.value = await comments(id);  \r\n\r\n\r\n</script>"],"mappings":";AAgCE,OAAOA,cAAc,MAAM,uCAAuC;AAClE,SAASC,SAAS,EAAEC,GAAG,QAAQ,KAAK;AAEpC,SAAQC,QAAQ,QAAQ,YAAY;AACpC,SAASC,YAAY,QAAQ,eAAe;AAC5C,SAASC,eAAe,QAAQ,kBAAkB;AAqClD,SAAQC,QAAQ,QAAQ,uBAAuB;;;;;;;;IAnC/C,MAAMC,KAAK,GAAGJ,QAAQ,CAAC,CAAC;IACxB,MAAMK,EAAE,GAACD,KAAK,CAACE,MAAM,CAACD,EAAE;IAIxB,MAAME,SAAS,GAAGN,YAAY,CAAC,CAAC;IAChC,MAAMO,YAAY,GAAGN,eAAe,CAAC,CAAC;IAEtC,IAAIO,oBAAoB,GAAGV,GAAG,CAAC,EAAE,CAAC;IAClCU,oBAAoB,GAACD,YAAY,CAACE,kBAAkB,CAACL,EAAE,CAAC;IACxDM,OAAO,CAACC,GAAG,CAAC,0EAA0E,CAAC;IACvFD,OAAO,CAACC,GAAG,CAACH,oBAAoB,CAAC;IAEhC,MAAMI,YAAY,GAAG,MAAAA,CAAA,KAAW;MAC9B,MAAMN,SAAS,CAACM,YAAY,CAACR,EAAE,CAAC;IAGlC,CAAC;IAEFP,SAAS,CAAE,YAAW;MAEpB,MAAMe,YAAY,CAACR,EAAE,CAAC;MACtBG,YAAY,CAACE,kBAAkB,CAACL,EAAE,CAAC;IAErC,CAAC,CAAC;;IAOF;;IAEA,MAAMS,aAAa,GAAGf,GAAG,CAAC,EAAE,CAAC;IAG7Be,aAAa,CAACC,KAAK,IAAG,CAAAC,MAAA,EAAAC,SAAA,IAAAC,iBAAA,OAAMf,QAAQ,CAACE,EAAE,I,2CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}