{"ast":null,"code":"import { watch, onMounted } from 'vue';\n//const posts = ref([]);\nimport { usePostStore } from '@/stores/post';\nimport { useTopicStore } from '@/stores/topic';\nimport { useRoute } from 'vue-router';\nexport default {\n  __name: 'CategorieView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const id = route.params.id;\n    const topicStore = useTopicStore();\n    const fetchTopicsPosts = async () => {\n      await topicStore.fetchTopics();\n    };\n    const postStore = usePostStore();\n    const fetchPostsDunTopic = async () => {\n      await postStore.fetchPostsDunTopic();\n    };\n    onMounted(async () => {\n      await fetchTopicsPosts();\n      await fetchPostsDunTopic(id);\n    });\n    watch(() => route.params.id,\n    // en attente de la modification de l'ID\n    async newId => {\n      await fetchPostsDunTopic(newId);\n    });\n\n    //const data = await response.json();  \n\n    const __returned__ = {\n      route,\n      id,\n      topicStore,\n      fetchTopicsPosts,\n      postStore,\n      fetchPostsDunTopic,\n      watch,\n      onMounted,\n      get usePostStore() {\n        return usePostStore;\n      },\n      get useTopicStore() {\n        return useTopicStore;\n      },\n      get useRoute() {\n        return useRoute;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["watch","onMounted","usePostStore","useTopicStore","useRoute","route","id","params","topicStore","fetchTopicsPosts","fetchTopics","postStore","fetchPostsDunTopic","newId"],"sources":["C:/Users/jfrey/Dropbox/cours/_webdev/code/semaine 4/lundi/website-practice/src/views/CategorieView.vue"],"sourcesContent":["<template>\r\n  <div class=\"home\">\r\n      <h1 class=\"ma-2\">Home</h1>\r\n      <v-row class=\"-flex justify-center\">\r\n          \r\n          <v-card v-for=\"(post,index) in postStore.formattedPosts\" :key=\"index\" \r\n\r\n              class=\"w-33 pa-4 ma-2 \"\r\n              :color=\"postStore.colorPost(post.topic)\"\r\n              >\r\n              <v-card-title class=\"text-uppercase\">{{ post.topicText}}</v-card-title>\r\n              <v-img\r\n              max-height=\"200px\"\r\n              width=\"300px\"\r\n              :src=\"post.image\"\r\n             \r\n              cover\r\n              ></v-img>\r\n           \r\n              <v-card-title>{{ post.title }}</v-card-title>\r\n              \r\n              \r\n              <v-card-text>{{ post.body }}</v-card-text>\r\n              <v-card-actions>\r\n                  <v-btn\r\n                      color=\"orange-darken-4\"\r\n                      text = \"Lire l'article\"\r\n                      :to=\"{ name: 'post',params: { id: index } }\"\r\n                  ></v-btn> \r\n              </v-card-actions>\r\n          </v-card>\r\n      </v-row>\r\n  </div>\r\n</template>\r\n<script setup>\r\n   \r\n   \r\n  import { watch,onMounted } from 'vue';\r\n  //const posts = ref([]);\r\n    import { usePostStore } from '@/stores/post';    \r\n    import { useTopicStore } from '@/stores/topic';   \r\n\r\n  import {useRoute } from 'vue-router';\r\n\r\n  const route = useRoute();\r\n  const id=route.params.id;\r\n\r\n  const topicStore = useTopicStore();\r\n\r\n  const fetchTopicsPosts = async () =>{\r\n      await topicStore.fetchTopics();\r\n  } \r\n\r\n\r\n  const postStore = usePostStore();\r\n\r\n\r\n  const fetchPostsDunTopic = async () =>{\r\n      await postStore.fetchPostsDunTopic();\r\n  } \r\n\r\n  onMounted( async() => {\r\n      \r\n      await fetchTopicsPosts();\r\n      await fetchPostsDunTopic(id);\r\n  });\r\n  watch(() => route.params.id, // en attente de la modification de l'ID\r\n  async (newId) => {\r\n    await fetchPostsDunTopic(newId);\r\n\r\n  })\r\n  \r\n  \r\n  //const data = await response.json();  \r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n     \r\n\r\n\r\n</script>"],"mappings":"AAqCE,SAASA,KAAK,EAACC,SAAS,QAAQ,KAAK;AACrC;AACE,SAASC,YAAY,QAAQ,eAAe;AAC5C,SAASC,aAAa,QAAQ,gBAAgB;AAEhD,SAAQC,QAAQ,QAAQ,YAAY;;;;;;;IAEpC,MAAMC,KAAK,GAAGD,QAAQ,CAAC,CAAC;IACxB,MAAME,EAAE,GAACD,KAAK,CAACE,MAAM,CAACD,EAAE;IAExB,MAAME,UAAU,GAAGL,aAAa,CAAC,CAAC;IAElC,MAAMM,gBAAgB,GAAG,MAAAA,CAAA,KAAW;MAChC,MAAMD,UAAU,CAACE,WAAW,CAAC,CAAC;IAClC,CAAC;IAGD,MAAMC,SAAS,GAAGT,YAAY,CAAC,CAAC;IAGhC,MAAMU,kBAAkB,GAAG,MAAAA,CAAA,KAAW;MAClC,MAAMD,SAAS,CAACC,kBAAkB,CAAC,CAAC;IACxC,CAAC;IAEDX,SAAS,CAAE,YAAW;MAElB,MAAMQ,gBAAgB,CAAC,CAAC;MACxB,MAAMG,kBAAkB,CAACN,EAAE,CAAC;IAChC,CAAC,CAAC;IACFN,KAAK,CAAC,MAAMK,KAAK,CAACE,MAAM,CAACD,EAAE;IAAE;IAC7B,MAAOO,KAAK,IAAK;MACf,MAAMD,kBAAkB,CAACC,KAAK,CAAC;IAEjC,CAAC,CAAC;;IAGF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}