{"ast":null,"code":"import { defineStore } from \"pinia\";\nimport { useTopicStore } from '@/stores/topic';\nconst usePostStore = defineStore('post', {\n  // state est une fonction afin d'être réactive\n  // State représente la partie principale du store, \n  // c'est l'endroit qui va contenir la structure de données de l'application.\n  state: () => {\n    return {\n      posts: []\n    };\n  },\n  // Les getters représentent des methodes \n  // permettant de récupérer des données du store et \n  // de les manipuler avant sans les modifier.\n  getters: {\n    formattedPosts() {\n      return this.sortPosts.map(post => {\n        return {\n          title: post.Titre,\n          body: post.Description,\n          image: post.Image\n        };\n      });\n    },\n    sortPosts(state) {\n      return state.posts.sort((a, b) => a.Titre.localeCompare(b.Titre));\n    }\n  },\n  //les actions représentent les manipulatuions de données\n  // qui vont être effectuées sur le store.\n  actions: {\n    async fetchPosts() {\n      const response = await fetch('https://tall-otter-40.telebit.io/posts/all');\n      const posts = await response.json();\n      console.log(\"---------------------- posts -----------------------\");\n      console.log(posts);\n      const topicStore = useTopicStore();\n      console.log(\"---------------------- topicStore.state -----------------------\");\n      console.log(topicStore.$state);\n      const addTopicField = () => {\n        console.log('je passe dans addTopicField');\n        // const keys=Object.keys(posts.value)\n        // keys.forEach((topic)=>{\n        //     const tabTopicEnCours=posts.value[topic];\n        //     tabTopicEnCours.forEach((article)=>{\n        //         const found=topicStore.state.indexOf(topic)\n        //         article.Topic = found!=-1 ? found+1 : 0;\n        //         article.TopicText = topic;    \n        //         posts.value.push(article);\n        //     })\n\n        // })\n      };\n      addTopicField();\n      this.posts = posts;\n    }\n  }\n});\nexport { usePostStore };","map":{"version":3,"names":["defineStore","useTopicStore","usePostStore","state","posts","getters","formattedPosts","sortPosts","map","post","title","Titre","body","Description","image","Image","sort","a","b","localeCompare","actions","fetchPosts","response","fetch","json","console","log","topicStore","$state","addTopicField"],"sources":["C:/Users/jfrey/Dropbox/cours/_webdev/code/semaine 4/lundi/website-practice/src/stores/post.js"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport { useTopicStore } from '@/stores/topic';\r\n\r\nconst usePostStore = defineStore('post', {\r\n  // state est une fonction afin d'être réactive\r\n  // State représente la partie principale du store, \r\n  // c'est l'endroit qui va contenir la structure de données de l'application.\r\n  state: () => {\r\n    return {\r\n      posts: [],\r\n    };\r\n  },\r\n  // Les getters représentent des methodes \r\n  // permettant de récupérer des données du store et \r\n  // de les manipuler avant sans les modifier.\r\n  getters: {\r\n    formattedPosts(){\r\n      return this.sortPosts.map(post =>{\r\n        return{\r\n          title : post.Titre,\r\n          body : post.Description,\r\n          image: post.Image\r\n        }\r\n      })\r\n    },\r\n    sortPosts(state){\r\n      return state.posts.sort((a,b)=>a.Titre.localeCompare(b.Titre));\r\n    }\r\n\r\n  },\r\n  //les actions représentent les manipulatuions de données\r\n  // qui vont être effectuées sur le store.\r\n  actions: {\r\n    async fetchPosts() {\r\n      \r\n      const response = await fetch('https://tall-otter-40.telebit.io/posts/all');\r\n      const posts = await response.json();\r\n      console.log(\"---------------------- posts -----------------------\")\r\n      console.log(posts);\r\n      const topicStore = useTopicStore();\r\n      console.log(\"---------------------- topicStore.state -----------------------\")\r\n      console.log(topicStore.$state);\r\n      \r\n      const addTopicField=()=>{\r\n        console.log('je passe dans addTopicField');\r\n        // const keys=Object.keys(posts.value)\r\n        // keys.forEach((topic)=>{\r\n        //     const tabTopicEnCours=posts.value[topic];\r\n        //     tabTopicEnCours.forEach((article)=>{\r\n        //         const found=topicStore.state.indexOf(topic)\r\n        //         article.Topic = found!=-1 ? found+1 : 0;\r\n        //         article.TopicText = topic;    \r\n        //         posts.value.push(article);\r\n        //     })\r\n           \r\n        // })\r\n        \r\n        \r\n        \r\n    }\r\n    addTopicField();\r\n     \r\n      this.posts = posts;\r\n      }\r\n  },\r\n});\r\nexport {usePostStore};"],"mappings":"AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,SAASC,aAAa,QAAQ,gBAAgB;AAE9C,MAAMC,YAAY,GAAGF,WAAW,CAAC,MAAM,EAAE;EACvC;EACA;EACA;EACAG,KAAK,EAAEA,CAAA,KAAM;IACX,OAAO;MACLC,KAAK,EAAE;IACT,CAAC;EACH,CAAC;EACD;EACA;EACA;EACAC,OAAO,EAAE;IACPC,cAAcA,CAAA,EAAE;MACd,OAAO,IAAI,CAACC,SAAS,CAACC,GAAG,CAACC,IAAI,IAAG;QAC/B,OAAM;UACJC,KAAK,EAAGD,IAAI,CAACE,KAAK;UAClBC,IAAI,EAAGH,IAAI,CAACI,WAAW;UACvBC,KAAK,EAAEL,IAAI,CAACM;QACd,CAAC;MACH,CAAC,CAAC;IACJ,CAAC;IACDR,SAASA,CAACJ,KAAK,EAAC;MACd,OAAOA,KAAK,CAACC,KAAK,CAACY,IAAI,CAAC,CAACC,CAAC,EAACC,CAAC,KAAGD,CAAC,CAACN,KAAK,CAACQ,aAAa,CAACD,CAAC,CAACP,KAAK,CAAC,CAAC;IAChE;EAEF,CAAC;EACD;EACA;EACAS,OAAO,EAAE;IACP,MAAMC,UAAUA,CAAA,EAAG;MAEjB,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,4CAA4C,CAAC;MAC1E,MAAMnB,KAAK,GAAG,MAAMkB,QAAQ,CAACE,IAAI,CAAC,CAAC;MACnCC,OAAO,CAACC,GAAG,CAAC,sDAAsD,CAAC;MACnED,OAAO,CAACC,GAAG,CAACtB,KAAK,CAAC;MAClB,MAAMuB,UAAU,GAAG1B,aAAa,CAAC,CAAC;MAClCwB,OAAO,CAACC,GAAG,CAAC,iEAAiE,CAAC;MAC9ED,OAAO,CAACC,GAAG,CAACC,UAAU,CAACC,MAAM,CAAC;MAE9B,MAAMC,aAAa,GAACA,CAAA,KAAI;QACtBJ,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;QAC1C;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;MAIJ,CAAC;MACDG,aAAa,CAAC,CAAC;MAEb,IAAI,CAACzB,KAAK,GAAGA,KAAK;IAClB;EACJ;AACF,CAAC,CAAC;AACF,SAAQF,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}