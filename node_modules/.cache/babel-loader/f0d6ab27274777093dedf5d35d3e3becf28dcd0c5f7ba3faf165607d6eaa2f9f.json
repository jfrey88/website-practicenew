{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineStore } from \"pinia\";\nimport { useTopicStore } from '@/stores/topic';\nconst usePostStore = defineStore('post', {\n  // state est une fonction afin d'être réactive\n  // State représente la partie principale du store, \n  // c'est l'endroit qui va contenir la structure de données de l'application.\n  state: () => {\n    return {\n      posts: [],\n      post: {}\n    };\n  },\n  // Les getters représentent des methodes \n  // permettant de récupérer des données du store et \n  // de les manipuler avant sans les modifier.\n  getters: {\n    formattedPosts() {\n      return this.sortPosts.map(post => {\n        return {\n          title: post.Titre,\n          body: post.Description,\n          image: post.Image,\n          topic: post.Topic,\n          topicText: post.TopicText,\n          id: post.id\n        };\n      });\n    },\n    formattedPost(id) {\n      console.log(this.posts);\n      return {\n        title: this.posts[id].Titre,\n        body: this.posts[id].Description,\n        image: this.posts[id][\"Image\\\\n\"]\n      };\n    },\n    sortPosts(state) {\n      return state.posts.sort((a, b) => a.Titre.localeCompare(b.Titre));\n    },\n    colorPost: () => {\n      return topic => {\n        const topicStore = useTopicStore();\n        return topicStore.getTopicColor(topic);\n      };\n    },\n    postDUnTopic: state => {\n      return topic => {\n        console.log(state, topic);\n      };\n    }\n  },\n  //les actions représentent les manipulatuions de données\n  // qui vont être effectuées sur le store.\n  actions: {\n    // cette fonction récupère tous les posts\n    async fetchPosts() {\n      const response = await fetch('https://tall-otter-40.telebit.io/posts/all');\n      const posts = await response.json();\n      const topicStore = useTopicStore();\n      const addTopicField = () => {\n        const arrayPosts = [];\n        let id = 0;\n        const keys = Object.keys(posts);\n        keys.forEach(topic => {\n          const tabTopicEnCours = posts[topic];\n          tabTopicEnCours.forEach(article => {\n            article.Topic = topicStore.getTopicIndex(topic);\n            article.TopicText = topic;\n            article.id = id;\n            arrayPosts.push(article);\n            id++;\n          });\n        });\n        return arrayPosts;\n      };\n      this.posts = addTopicField();\n    },\n    // cette fonction récupère tous les posts d'un topic\n    async fetchPostsForTopic(topicDemande) {\n      console.log(\"topicDemande\", topicDemande);\n      const response = await fetch(` https://tall-otter-40.telebit.io/posts?topic=${topicDemande}`);\n      const posts2 = await response.json();\n      const topicStore = useTopicStore();\n      const addTopicField = () => {\n        const arrayPosts = [];\n        //const keys=Object.keys(posts2);\n        const numTopic = topicStore.getTopicIndex(topicDemande);\n        posts2.forEach(post => {\n          console.log(post);\n          console.log(topicDemande, ' ', numTopic);\n          post.Topic = numTopic;\n          post.TopicText = topicDemande;\n          arrayPosts.push(post);\n        });\n        return arrayPosts;\n      };\n      this.posts = addTopicField(topicDemande);\n    },\n    // cette fonction récupère un  post a l index idPost\n    async fetchOnePost(idPost) {\n      const response = await fetch(`https://tall-otter-40.telebit.io/posts/${idPost}`);\n      const postEnCours = await response.json();\n      console.log('post.js-->postEnCours ', postEnCours);\n      this.post = postEnCours;\n      console.log('post.js-->this.posts ', this.post);\n    }\n  }\n});\nexport { usePostStore };","map":{"version":3,"names":["defineStore","useTopicStore","usePostStore","state","posts","post","getters","formattedPosts","sortPosts","map","title","Titre","body","Description","image","Image","topic","Topic","topicText","TopicText","id","formattedPost","console","log","sort","a","b","localeCompare","colorPost","topicStore","getTopicColor","postDUnTopic","actions","fetchPosts","response","fetch","json","addTopicField","arrayPosts","keys","Object","forEach","tabTopicEnCours","article","getTopicIndex","push","fetchPostsForTopic","topicDemande","posts2","numTopic","fetchOnePost","idPost","postEnCours"],"sources":["C:/Users/jfrey/Dropbox/cours/_webdev/code/semaine 4/lundi/website-practice/src/stores/post.js"],"sourcesContent":["import { defineStore } from \"pinia\";\r\nimport { useTopicStore } from '@/stores/topic';\r\n\r\n\r\nconst usePostStore = defineStore('post', {\r\n  // state est une fonction afin d'être réactive\r\n  // State représente la partie principale du store, \r\n  // c'est l'endroit qui va contenir la structure de données de l'application.\r\n  state: () => {\r\n    return {\r\n      posts: [],\r\n      post:{},\r\n    };\r\n  },\r\n  // Les getters représentent des methodes \r\n  // permettant de récupérer des données du store et \r\n  // de les manipuler avant sans les modifier.\r\n  getters: {\r\n    formattedPosts(){\r\n      return this.sortPosts.map(post =>{\r\n        return{\r\n          title : post.Titre,\r\n          body : post.Description,\r\n          image: post.Image,\r\n          topic : post.Topic,\r\n          topicText : post.TopicText,\r\n          id : post.id\r\n        }\r\n      })\r\n    },\r\n    formattedPost(id){\r\n      console.log(this.posts);\r\n        return{\r\n        \r\n          title : this.posts[id].Titre,\r\n          body : this.posts[id].Description,\r\n          image: this.posts[id][\"Image\\\\n\"]\r\n        }\r\n     \r\n    },\r\n    sortPosts(state){\r\n      return state.posts.sort((a,b)=>a.Titre.localeCompare(b.Titre));\r\n    },\r\n    colorPost:()=>{\r\n      return (topic)=>{\r\n        const topicStore = useTopicStore();\r\n     \r\n        return topicStore.getTopicColor(topic);\r\n      }\r\n     \r\n    },\r\n    postDUnTopic:(state)=>{\r\n      return(topic)=>{\r\n        console.log(state,topic);\r\n      }\r\n    },\r\n    \r\n    \r\n\r\n  },\r\n  //les actions représentent les manipulatuions de données\r\n  // qui vont être effectuées sur le store.\r\n  actions: {\r\n    // cette fonction récupère tous les posts\r\n    async fetchPosts() {\r\n      \r\n      const response = await fetch('https://tall-otter-40.telebit.io/posts/all');\r\n      const posts = await response.json();\r\n\r\n      const topicStore = useTopicStore();\r\n      \r\n      const addTopicField=()=>{\r\n       \r\n        const arrayPosts=[];\r\n        let id=0;\r\n        const keys=Object.keys(posts);\r\n        keys.forEach((topic)=>{\r\n          const tabTopicEnCours=posts[topic];\r\n          tabTopicEnCours.forEach((article)=>{\r\n             article.Topic = topicStore.getTopicIndex(topic);\r\n             article.TopicText = topic;\r\n             article.id=id;\r\n             arrayPosts.push(article);\r\n             id++;\r\n          })\r\n          \r\n        })\r\n        return arrayPosts\r\n           \r\n      }\r\n      this.posts = addTopicField();\r\n      },\r\n\r\n     // cette fonction récupère tous les posts d'un topic\r\n          async fetchPostsForTopic(topicDemande) {\r\n        \r\n          console.log(\"topicDemande\",topicDemande);\r\n          const response = await fetch(` https://tall-otter-40.telebit.io/posts?topic=${topicDemande}`);\r\n          const posts2 = await response.json();\r\n          \r\n          const topicStore = useTopicStore();\r\n        \r\n          const addTopicField=()=>{\r\n         \r\n            const arrayPosts=[];\r\n            //const keys=Object.keys(posts2);\r\n            const numTopic=topicStore.getTopicIndex(topicDemande);\r\n            posts2.forEach((post)=>{\r\n                console.log(post);\r\n                console.log(topicDemande,' ',numTopic);\r\n                post.Topic = numTopic;\r\n                post.TopicText = topicDemande;\r\n                arrayPosts.push(post);\r\n              })\r\n              \r\n             \r\n            \r\n         \r\n            return arrayPosts\r\n              \r\n          }\r\n        this.posts = addTopicField(topicDemande);\r\n        \r\n    },\r\n    // cette fonction récupère un  post a l index idPost\r\n    async fetchOnePost(idPost) {\r\n        \r\n  \r\n      const response = await fetch(`https://tall-otter-40.telebit.io/posts/${idPost}`);\r\n      const postEnCours = await response.json();\r\n      console.log('post.js-->postEnCours ',postEnCours)\r\n      this.post = postEnCours;\r\n      console.log('post.js-->this.posts ',this.post)\r\n    },\r\n  },\r\n   \r\n\r\n  \r\n});\r\nexport {usePostStore};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}