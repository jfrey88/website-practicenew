{"ast":null,"code":"import { ref } from 'vue';\nimport { reactive } from 'vue';\nimport { useVuelidate } from '@vuelidate/core';\nimport { email, required } from '@vuelidate/validators';\nexport default {\n  __name: 'AppFormComment',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const initialState = {\n      lastname: '',\n      email: '',\n      comment: ''\n    };\n    const state = reactive({\n      ...initialState\n    });\n    const rules = {\n      lastname: {\n        required\n      },\n      email: {\n        required,\n        email\n      },\n      comment: {\n        required\n      }\n    };\n    const v$ = useVuelidate(rules, state);\n    const model = ref({\n      lastname: \"\",\n      email: \"\",\n      comment: \"\"\n    });\n    function clear() {\n      v$.value.$reset();\n      for (const [key, value] of Object.entries(initialState)) {\n        state[key] = value;\n      }\n    }\n    const nameRules = value => {\n      if (value) {\n        if (value.length <= 20) {\n          if (value.trim() == \"\") {\n            return 'Le nom est obligatoire';\n          } else {\n            return true;\n          }\n        } else {\n          return 'Le nom doit avoir moins de 20 lettres';\n        }\n      } else {\n        return 'Le nom est obligatoire';\n      }\n    };\n    const emailRules = value => {\n      if (value) {\n        if (/.+@.+\\..+/.test(value)) {\n          return true;\n        } else {\n          return 'l\\'adresse email doit être valide.';\n        }\n      } else {\n        return 'L\\'email est obligatoire';\n      }\n    };\n    const commentRules = value => {\n      if (value) {\n        if (value.length <= 2000) {\n          if (value.trim() == \"\") {\n            return 'Le commentaire est obligatoire';\n          } else {\n            return true;\n          }\n        } else {\n          return 'Le nom doit avoir moins de 2000 lettres';\n        }\n      } else {\n        return 'Le commentaire est obligatoire';\n      }\n    };\n    const __returned__ = {\n      initialState,\n      state,\n      rules,\n      v$,\n      model,\n      clear,\n      nameRules,\n      emailRules,\n      commentRules,\n      ref,\n      reactive,\n      get useVuelidate() {\n        return useVuelidate;\n      },\n      get email() {\n        return email;\n      },\n      get required() {\n        return required;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","useVuelidate","email","required","initialState","lastname","comment","state","rules","v$","model","clear","value","$reset","key","Object","entries","nameRules","length","trim","emailRules","test","commentRules"],"sources":["C:/Users/jfrey/Dropbox/cours/_webdev/code/semaine 3/jeudi/website-practice/src/components/forms/AppFormComment.vue"],"sourcesContent":["<template>\r\n  <v-sheet class=\"mx-auto\" width=\"800\">\r\n    <v-form @submit.prevent=\"submit\">\r\n      <v-container >\r\n        \r\n        <v-row>\r\n          <v-col\r\n            cols=\"12\"\r\n            md=\"6\"\r\n          >\r\n            <v-text-field\r\n              v-model=\"model.lastname\"\r\n              \r\n              bg-color=\"purple-lighten-5\"\r\n              variant=\"solo\"\r\n              :counter=\"10\"\r\n              :error-messages=\"v$.lastname.$errors.map(e => e.$message)\"\r\n              label=\"Votre nom\"\r\n              hide-details\r\n              required\r\n              @blur=\"v$.lastname.$touch\"\r\n              @input=\"v$.lastname.$touch\"\r\n            ></v-text-field>\r\n          </v-col>\r\n  \r\n         \r\n  \r\n          <v-col\r\n            cols=\"12\"\r\n            md=\"6\"\r\n          >\r\n            <v-text-field\r\n              v-model=\"model.email\"\r\n              prepend-inner-icon=\"mdi-email\"\r\n              bg-color=\"purple-lighten-5\"\r\n              variant=\"solo\"\r\n              \r\n              :error-messages=\"v$.email.$errors.map(e => e.$message)\"\r\n              label=\"Votre email\"\r\n              hide-details\r\n              required\r\n              @blur=\"v$.email.$touch\"\r\n              @input=\"v$.email.$touch\"\r\n            ></v-text-field>\r\n          </v-col>\r\n        </v-row>\r\n        <v-row>\r\n          <v-col\r\n            cols=\"12\"\r\n            md=\"12\"\r\n          >\r\n            <v-textarea\r\n              \r\n            prepend-inner-icon=\"mdi-comment\"\r\n            bg-color=\"purple-lighten-5\"\r\n              v-model=\"model.comment\"\r\n              variant=\"solo\"\r\n              row-height=\"30\"\r\n              rows=\"4\"\r\n              :counter=\"10\"\r\n              :error-messages=\"v$.comment.$errors.map(e => e.$message)\"\r\n              label=\"Votre commenaire\"\r\n              hide-details\r\n              required\r\n              @blur=\"v$.comment.$touch\"\r\n              @input=\"v$.comment.$touch\"\r\n            ></v-textarea>\r\n          </v-col>\r\n        </v-row>\r\n        <v-row>\r\n          <v-col\r\n            cols=\"12\"\r\n            md=\"6\"\r\n          >\r\n          <v-btn \r\n            class=\"mt-2\" \r\n            \r\n            @click=\"v$.$validate\"\r\n           \r\n            color=\"purple-lighten-4\"\r\n            >Submit</v-btn>\r\n          </v-col>\r\n          <v-col\r\n            cols=\"12\"\r\n            md=\"6\"\r\n          >\r\n          <v-btn \r\n            class=\"mt-2\" \r\n            \r\n            @click=\"clear\"\r\n           \r\n            color=\"purple-lighten-4\"\r\n            >Clear</v-btn>\r\n          </v-col>\r\n        </v-row>\r\n      </v-container>\r\n    </v-form>\r\n  </v-sheet>\r\n  </template>\r\n  <script setup>\r\n\r\n    import { ref } from 'vue';\r\n  \r\n    import { reactive } from 'vue'\r\n  import { useVuelidate } from '@vuelidate/core'\r\n  import { email, required } from '@vuelidate/validators'\r\n\r\n  const initialState = {\r\n    lastname: '',\r\n    email: '',\r\n    comment: ''\r\n  }\r\n\r\n  const state = reactive({\r\n    ...initialState,\r\n  })\r\n\r\n  const rules = {\r\n    lastname: { required },\r\n    email: { required, email },\r\n    comment: { required }\r\n   \r\n  }\r\n  const v$ = useVuelidate(rules, state)\r\n\r\n    const model=ref({\r\n      lastname:\"\",\r\n      email:\"\",\r\n      comment:\"\"\r\n    });\r\n\r\n    function clear () {\r\n    v$.value.$reset()\r\n\r\n    for (const [key, value] of Object.entries(initialState)) {\r\n      state[key] = value\r\n    }\r\n  }\r\n    const nameRules=(value)=>{\r\n      if (value) \r\n      {\r\n        if((value.length <= 20))\r\n        {\r\n          if ((value.trim())==\"\")\r\n          {\r\n            return('Le nom est obligatoire');\r\n          }else{\r\n            return true;\r\n          }\r\n          \r\n\r\n        }else{\r\n          return 'Le nom doit avoir moins de 20 lettres';\r\n        }\r\n      }else{\r\n        return('Le nom est obligatoire')\r\n      }\r\n    }\r\n\r\n    const emailRules=(value)=>{\r\n      if (value) \r\n      {\r\n        if (/.+@.+\\..+/.test(value)) \r\n        {\r\n          return true\r\n        }else{\r\n          return 'l\\'adresse email doit être valide.'\r\n        }\r\n      }else{\r\n        return('L\\'email est obligatoire');\r\n      }\r\n    }\r\n\r\n    const commentRules=(value)=>{\r\n      if (value) \r\n      {\r\n        if((value.length <= 2000))\r\n        {\r\n          if ((value.trim())==\"\")\r\n          {\r\n            return('Le commentaire est obligatoire');\r\n          }else{\r\n            return true;\r\n          }\r\n          \r\n\r\n        }else{\r\n          return 'Le nom doit avoir moins de 2000 lettres';\r\n        }\r\n      }else{\r\n        return('Le commentaire est obligatoire')\r\n      }\r\n    }\r\n    \r\n  </script>"],"mappings":"AAqGI,SAASA,GAAG,QAAQ,KAAK;AAEzB,SAASC,QAAQ,QAAQ,KAAK;AAChC,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,KAAK,EAAEC,QAAQ,QAAQ,uBAAuB;;;;;;;IAEvD,MAAMC,YAAY,GAAG;MACnBC,QAAQ,EAAE,EAAE;MACZH,KAAK,EAAE,EAAE;MACTI,OAAO,EAAE;IACX,CAAC;IAED,MAAMC,KAAK,GAAGP,QAAQ,CAAC;MACrB,GAAGI;IACL,CAAC,CAAC;IAEF,MAAMI,KAAK,GAAG;MACZH,QAAQ,EAAE;QAAEF;MAAS,CAAC;MACtBD,KAAK,EAAE;QAAEC,QAAQ;QAAED;MAAM,CAAC;MAC1BI,OAAO,EAAE;QAAEH;MAAS;IAEtB,CAAC;IACD,MAAMM,EAAE,GAAGR,YAAY,CAACO,KAAK,EAAED,KAAK,CAAC;IAEnC,MAAMG,KAAK,GAACX,GAAG,CAAC;MACdM,QAAQ,EAAC,EAAE;MACXH,KAAK,EAAC,EAAE;MACRI,OAAO,EAAC;IACV,CAAC,CAAC;IAEF,SAASK,KAAKA,CAAA,EAAI;MAClBF,EAAE,CAACG,KAAK,CAACC,MAAM,CAAC,CAAC;MAEjB,KAAK,MAAM,CAACC,GAAG,EAAEF,KAAK,CAAC,IAAIG,MAAM,CAACC,OAAO,CAACZ,YAAY,CAAC,EAAE;QACvDG,KAAK,CAACO,GAAG,CAAC,GAAGF,KAAK;MACpB;IACF;IACE,MAAMK,SAAS,GAAEL,KAAK,IAAG;MACvB,IAAIA,KAAK,EACT;QACE,IAAIA,KAAK,CAACM,MAAM,IAAI,EAAE,EACtB;UACE,IAAKN,KAAK,CAACO,IAAI,CAAC,CAAC,IAAG,EAAE,EACtB;YACE,OAAO,wBAAwB;UACjC,CAAC,MAAI;YACH,OAAO,IAAI;UACb;QAGF,CAAC,MAAI;UACH,OAAO,uCAAuC;QAChD;MACF,CAAC,MAAI;QACH,OAAO,wBAAwB;MACjC;IACF,CAAC;IAED,MAAMC,UAAU,GAAER,KAAK,IAAG;MACxB,IAAIA,KAAK,EACT;QACE,IAAI,WAAW,CAACS,IAAI,CAACT,KAAK,CAAC,EAC3B;UACE,OAAO,IAAI;QACb,CAAC,MAAI;UACH,OAAO,oCAAoC;QAC7C;MACF,CAAC,MAAI;QACH,OAAO,0BAA0B;MACnC;IACF,CAAC;IAED,MAAMU,YAAY,GAAEV,KAAK,IAAG;MAC1B,IAAIA,KAAK,EACT;QACE,IAAIA,KAAK,CAACM,MAAM,IAAI,IAAI,EACxB;UACE,IAAKN,KAAK,CAACO,IAAI,CAAC,CAAC,IAAG,EAAE,EACtB;YACE,OAAO,gCAAgC;UACzC,CAAC,MAAI;YACH,OAAO,IAAI;UACb;QAGF,CAAC,MAAI;UACH,OAAO,yCAAyC;QAClD;MACF,CAAC,MAAI;QACH,OAAO,gCAAgC;MACzC;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}